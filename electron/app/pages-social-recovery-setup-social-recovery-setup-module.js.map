{"version":3,"sources":["./src/app/pages/social-recovery-setup/social-recovery-setup.module.ts","./src/app/pages/social-recovery-setup/social-recovery-setup.page.ts","./src/app/pages/social-recovery-setup/social-recovery-setup.page.html"],"names":[],"mappings":"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","file":"pages-social-recovery-setup-social-recovery-setup-module.js","sourcesContent":["import { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { RouterModule, Routes } from '@angular/router'\nimport { IonicModule } from '@ionic/angular'\nimport { TranslateModule } from '@ngx-translate/core'\n\nimport { SocialRecoverySetupPage } from './social-recovery-setup.page'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SocialRecoverySetupPage\n  }\n]\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, RouterModule.forChild(routes), TranslateModule],\n  declarations: [SocialRecoverySetupPage]\n})\nexport class SocialRecoverySetupPageModule {}\n","import { Component } from '@angular/core'\nimport * as bip39 from 'bip39'\n\nimport { Secret } from '../../models/secret'\nimport { DeviceService } from '../../services/device/device.service'\nimport { ErrorCategory, handleErrorLocal } from '../../services/error-handler/error-handler.service'\nimport { NavigationService } from '../../services/navigation/navigation.service'\nimport { SecretsService } from '../../services/secrets/secrets.service'\n\n@Component({\n  selector: 'airgap-social-recovery-setup',\n  templateUrl: './social-recovery-setup.page.html',\n  styleUrls: ['./social-recovery-setup.page.scss']\n})\nexport class SocialRecoverySetupPage {\n  public numberOfShares: number = 3\n  public numberOfRequiredShares: number = 2\n  private readonly secret: Secret\n\n  constructor(\n    private readonly secretService: SecretsService,\n    private readonly deviceService: DeviceService,\n    private readonly navigationService: NavigationService\n  ) {\n    this.secret = this.navigationService.getState().secret\n  }\n\n  public ionViewDidEnter(): void {\n    this.deviceService.setSecureWindow()\n  }\n\n  public ionViewWillLeave(): void {\n    this.deviceService.clearSecureWindow()\n  }\n\n  public setNumberOfShares(i: number): void {\n    this.numberOfShares = i\n    if (this.numberOfRequiredShares > this.numberOfShares) {\n      this.numberOfRequiredShares = this.numberOfShares\n    }\n  }\n\n  public setNumberOfRequiredShares(i: number): void {\n    this.numberOfRequiredShares = i\n  }\n\n  public back(): void {\n    this.navigationService.back()\n  }\n\n  public next(): void {\n    this.secretService\n      .retrieveEntropyForSecret(this.secret)\n      .then((entropy) => {\n        const shares: string[] = Secret.generateSocialRecover(\n          bip39.entropyToMnemonic(entropy),\n          this.numberOfShares,\n          this.numberOfRequiredShares\n        )\n        this.navigationService\n          .routeWithState('/social-recovery-show-share', { shares, currentShare: 0, secret: this.secret })\n          .catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n      })\n      .catch((error) => {\n        console.warn(error)\n      })\n  }\n}\n","<ion-header no-border>\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-back-button></ion-back-button>\n    </ion-buttons>\n    <ion-title>\n      {{ 'social-recovery-setup.title' | translate }}\n    </ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <p class=\"font--weight__med ion-padding-bottom\">{{ 'social-recovery-setup.text' | translate }}</p>\n  <p class=\"font--weight__med\">{{ 'social-recovery-setup.secret-shares.label' | translate }}</p>\n  <p class=\"ion-padding-bottom\">{{ 'social-recovery-setup.secret-shares.text' | translate }}</p>\n  <p class=\"font--weight__med\">{{ 'social-recovery-setup.shares-number_label' | translate }}</p>\n  <ion-row class=\"ion-padding-bottom button--rounded\">\n    <ion-button\n      shape=\"round\"\n      color=\"tertiary\"\n      *ngFor=\"let i of [2, 3, 4, 5, 6]\"\n      (click)=\"setNumberOfShares(i)\"\n      [color]=\"i === numberOfShares ? 'primary' : 'tertiary'\"\n    >\n      {{ i }}\n    </ion-button>\n  </ion-row>\n  <p class=\"font--weight__med\">{{ 'social-recovery-setup.shares-recovery_label' | translate }}</p>\n  <ion-row class=\"button--rounded\">\n    <ion-button\n      shape=\"round\"\n      color=\"tertiary\"\n      *ngFor=\"let i of [2, 3, 4, 5, 6]\"\n      (click)=\"setNumberOfRequiredShares(i)\"\n      [color]=\"i === numberOfRequiredShares ? 'primary' : 'tertiary'\"\n      [disabled]=\"i > numberOfShares\"\n    >\n      {{ i }}\n    </ion-button>\n  </ion-row>\n\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n    <ion-button color=\"primary\" shape=\"round\" (click)=\"next()\">\n      {{ 'social-recovery-setup.start_label' | translate }}\n    </ion-button>\n  </ion-fab>\n</ion-content>\n"],"sourceRoot":"webpack:///"}