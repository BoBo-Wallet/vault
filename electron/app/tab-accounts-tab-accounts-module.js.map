{"version":3,"sources":["./src/app/pages/tab-accounts/tab-accounts.module.ts","./src/app/pages/tab-accounts/tab-accounts.page.ts","./src/app/pages/tab-accounts/tab-accounts.page.html"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8C;AACN;AACI;AACU;AACV;AACS;AAEgB;AACf;AAED;;;AAErD,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kEAAe;KAC3B;CACF;AAED;IAAA;KAIqC;wGAAxB,qBAAqB;wKAArB,qBAAqB,kBAHvB,CAAC,4DAAY,EAAE,8EAAgB,EAAE,0DAAW,EAAE,0DAAW,EAAE,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,mEAAe,EAAE,+DAAW,CAAC;gCApBlI;CAuBqC;AAAH;mIAArB,qBAAqB,mBAFjB,kEAAe,aADpB,4DAAY,EAAE,8EAAgB,EAAE,0DAAW,EAAE,0DAAW,EAAE,8DAA+B,mEAAe,EAAE,+DAAW;6FAGpH,qBAAqB;cAJjC,sDAAQ;eAAC;gBACR,OAAO,EAAE,CAAC,4DAAY,EAAE,8EAAgB,EAAE,0DAAW,EAAE,0DAAW,EAAE,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE,mEAAe,EAAE,+DAAW,CAAC;gBAChI,YAAY,EAAE,CAAC,kEAAe,CAAC;aAChC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBgD;AAEC;AAGkD;AACpB;AACT;AAC9B;AACyB;;;;;;;;;;;;ICMhE,+EAQE;IAFA,yVAAsC;IAEtC,0EAA2D;IAC3D,gFACE;IAAA,qEAAI;IAAA,yEAAQ;IAAA,uDAA2D;;IAAA,4DAAS;IAAA,4DAAK;IACrF,oEAAG;IAAA,uDAAiE;;IAAA,4DAAI;IAC1E,4DAAY;IACd,4DAAW;;IAHK,0DAA2D;IAA3D,2KAA2D;IACpE,0DAAiE;IAAjE,iLAAiE;;;;IAKtE,wEACE;IAAA,0FAAkG;IAA3D,wYAAoC;IAAC,4DAAsB;IACpG,qEAAe;;;IADQ,0DAAiB;IAAjB,6EAAiB;;;IAIxC,0EACE;IAAA,qEACA;IAAA,oEACE;IAAA,yEAAQ;IAAA,uDAAgD;;IAAA,4DAAS;IACnE,4DAAI;IACN,4DAAM;;IAFM,0DAAgD;IAAhD,gKAAgD;;;;;IAzBhE,iFACE;IAAA,qIAQE;IAOF,2EACE;IAAA,4IACE;;;IAEJ,4DAAW;IACX,0EACE;IAAA,0HACE;;;IAKJ,4DAAU;IAEV,8EACE;IAAA,iFACE;IAD0C,gUAAqB;IAC/D,2EAA6C;IAC7C,wDACF;;IAAA,4DAAa;IACf,4DAAU;IACZ,4DAAc;;;IAlCV,0DAAiE;IAAjE,gJAAiE;IAenD,0DAAgF;IAAhF,mTAAgF;IAKtE,0DAA4F;IAA5F,iVAA4F;IAWlH,0DACF;IADE,6KACF;;ADrCJ;IAeE,yBAA6B,QAAkB,EAAmB,cAA8B,EAAmB,iBAAoC;QAA1H,aAAQ,GAAR,QAAQ,CAAU;QAAmB,mBAAc,GAAd,cAAc,CAAgB;QAAmB,sBAAiB,GAAjB,iBAAiB,CAAmB;QAJhJ,aAAQ,GAAoC,IAAI,oDAAe,CAAiB,EAAE,CAAC;QAKxF,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,EAAE;QACzD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;IAC9C,CAAC;IAEY,kCAAQ,GAArB;;;;gBACE,IAAI,CAAC,cAAc,CAAC,yBAAyB,EAAE,CAAC,SAAS,CAAC,UAAC,MAAc;oBACvE,IAAI,MAAM,IAAI,MAAM,CAAC,OAAO,EAAE;wBAC5B,KAAI,CAAC,YAAY,GAAG,MAAM;wBAC1B,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;qBACnC;gBACH,CAAC,CAAC;gBAEF,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,UAAO,OAAiB;;wBAC7C,IAAI,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;4BACxB,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;yBAC/G;;;qBACF,CAAC,EAAC,oGAAoG;;;;KACxG;IAEM,4CAAkB,GAAzB,UAA0B,MAAoB;QAC5C,IAAI,CAAC,iBAAiB,CAAC,cAAc,CAAC,kBAAkB,EAAE,EAAE,MAAM,UAAE,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IAC/H,CAAC;IAEM,qCAAW,GAAlB,UAAmB,KAAU;QAC3B,SAAS,aAAa,CAAC,IAAa;YAClC,OAAO,IAAI,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,IAAI,KAAK,EAAE;QACxD,CAAC;QAED,IAAM,KAAK,GAAY,KAAK,CAAC,MAAM,CAAC,KAAK;QAEzC,IAAI,CAAC,YAAY,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,SAAS;IACnF,CAAC;IAEM,mCAAS,GAAhB;QACE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IACtG,CAAC;IAEM,oDAA0B,GAAjC;QACE,IAAI,CAAC,iBAAiB,CAAC,cAAc,CACnC,cAAc,EACd;YACE,MAAM,EAAE,IAAI,CAAC,YAAY;YACzB,MAAM,EAAE,8EAAgB,CAAC,gBAAgB;SAC1C,CACF,CAAC,KAAK,CAAC,sGAAgB,CAAC,2FAAa,CAAC,gBAAgB,CAAC,CAAC;IAC3D,CAAC;kFAxDU,eAAe;mGAAf,eAAe;YChB5B,gFACE;YAAA,iFACE;YAAA,4EAAW;YAAA,uDAAqC;;YAAA,4DAAY;YAC9D,4DAAc;YAEd,iFACE;YAAA,mFAA+C;YACjD,4DAAc;YAEd,iFACE;YAAA,mFAAiI;YAAjD,0JAAY,uBAAmB,IAAC;;YAAC,4DAAgB;YACnI,4DAAc;YAChB,4DAAa;YAEb,+HACE;;YAba,0DAAqC;YAArC,qJAAqC;YAQjC,0DAAgE;YAAhE,qLAAgE;YAItE,0DAAgB;YAAhB,8EAAgB;;0BDd7B;CAyEC;AAzD2B;6FAAf,eAAe;cAL3B,uDAAS;eAAC;gBACT,QAAQ,EAAE,qBAAqB;gBAC/B,WAAW,EAAE,0BAA0B;gBACvC,SAAS,EAAE,CAAC,0BAA0B,CAAC;aACxC","file":"tab-accounts-tab-accounts-module.js","sourcesContent":["import { CommonModule } from '@angular/common'\nimport { NgModule } from '@angular/core'\nimport { FormsModule } from '@angular/forms'\nimport { RouterModule, Routes } from '@angular/router'\nimport { IonicModule } from '@ionic/angular'\nimport { TranslateModule } from '@ngx-translate/core'\n\nimport { ComponentsModule } from '../../components/components.module'\nimport { PipesModule } from '../../pipes/pipes.module'\n\nimport { TabAccountsPage } from './tab-accounts.page'\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TabAccountsPage\n  }\n]\n\n@NgModule({\n  imports: [CommonModule, ComponentsModule, FormsModule, IonicModule, RouterModule.forChild(routes), TranslateModule, PipesModule],\n  declarations: [TabAccountsPage]\n})\nexport class TabAccountsPageModule {}\n","import { Component, OnInit } from '@angular/core'\nimport { AirGapWallet } from '@bobo-wallet/coin-lib'\nimport { BehaviorSubject, Observable } from 'rxjs'\n\nimport { Secret } from '../../models/secret'\nimport { ErrorCategory, handleErrorLocal } from '../../services/error-handler/error-handler.service'\nimport { NavigationService } from '../../services/navigation/navigation.service'\nimport { SecretsService } from '../../services/secrets/secrets.service'\nimport { Platform } from '@ionic/angular'\nimport { SecretEditAction } from '../secret-edit/secret-edit.page'\n\n@Component({\n  selector: 'airgap-tab-accounts',\n  templateUrl: './tab-accounts.page.html',\n  styleUrls: ['./tab-accounts.page.scss']\n})\nexport class TabAccountsPage implements OnInit {\n  public readonly secrets: Observable<Secret[]>\n  public activeSecret: Secret\n\n  public symbolFilter: string | undefined\n\n  public wallets$: BehaviorSubject<AirGapWallet[]> = new BehaviorSubject<AirGapWallet[]>([])\n\n  public readonly isAndroid: boolean\n\n  constructor(private readonly platform: Platform, private readonly secretsService: SecretsService, private readonly navigationService: NavigationService) {\n    this.secrets = this.secretsService.getSecretsObservable()\n    this.isAndroid = this.platform.is('android')\n  }\n\n  public async ngOnInit(): Promise<void> {\n    this.secretsService.getActiveSecretObservable().subscribe((secret: Secret) => {\n      if (secret && secret.wallets) {\n        this.activeSecret = secret\n        this.wallets$.next(secret.wallets)\n      }\n    })\n\n    this.secrets.subscribe(async (secrets: Secret[]) => {\n      if (secrets.length === 0) {\n        this.navigationService.route('/secret-create/initial').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n      }\n    }) // We should never unsubscribe, because we need to watch this in case a user deletes all his secrets\n  }\n\n  public goToReceiveAddress(wallet: AirGapWallet): void {\n    this.navigationService.routeWithState('/account-address', { wallet }).catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public filterItems(event: any): void {\n    function isValidSymbol(data: unknown): data is string {\n      return data && typeof data === 'string' && data !== ''\n    }\n\n    const value: unknown = event.target.value\n\n    this.symbolFilter = isValidSymbol(value) ? value.trim().toLowerCase() : undefined\n  }\n\n  public addWallet(): void {\n    this.navigationService.route('/account-add').catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n\n  public navigateToRecoverySettings() {\n    this.navigationService.routeWithState(\n      '/secret-edit', \n      { \n        secret: this.activeSecret,\n        action: SecretEditAction.SET_RECOVERY_KEY\n      }\n    ).catch(handleErrorLocal(ErrorCategory.IONIC_NAVIGATION))\n  }\n}\n","<ion-header no-border>\n  <ion-toolbar color=\"secondary\">\n    <ion-title>{{ 'tab-wallets.title' | translate }}</ion-title>\n  </ion-toolbar>\n\n  <ion-toolbar color=\"secondary\">\n    <airgap-current-secret></airgap-current-secret>\n  </ion-toolbar>\n\n  <ion-toolbar color=\"secondary\">\n    <ion-searchbar placeholder=\"{{ 'tab-wallets.search_placeholder' | translate }}\" (ionInput)=\"filterItems($event)\"></ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content *ngIf=\"wallets$\" class=\"ion-padding-horizontal\">\n  <ion-item\n    *ngIf=\"isAndroid && activeSecret && !activeSecret.hasRecoveryKey\"\n    lines=\"none\"\n    detail=\"true\"\n    class=\"ion-margin-vertical\"\n    color=\"warning\"\n    (click)=\"navigateToRecoverySettings()\"\n  >\n    <ion-icon name=\"exit\" slot=\"start\" color=\"dark\"></ion-icon>\n    <ion-label color=\"dark\" class=\"ion-text-wrap\">\n      <h3><strong>{{ 'tab-wallets.generate-recovery-key.title' | translate }}</strong></h3>\n      <p>{{ 'tab-wallets.generate-recovery-key.description' | translate }}</p>\n    </ion-label>\n  </ion-item>\n\n  <ion-list>\n    <ng-container *ngFor=\"let wallet of wallets$ | async | walletFilter: { symbol: symbolFilter }\">\n      <airgap-account-item [wallet]=\"wallet\" (click)=\"goToReceiveAddress(wallet)\"></airgap-account-item>\n    </ng-container>\n  </ion-list>\n  <ion-row>\n    <div class=\"empty-list\" *ngIf=\"wallets$ && (wallets$ | async | walletFilter: { symbol: symbolFilter }).length === 0\">\n      <img src=\"./assets/img/no-wallet-added-onboarding.svg\" />\n      <p>\n        <strong>{{ 'tab-wallets.empty-state_text' | translate }}</strong>\n      </p>\n    </div>\n  </ion-row>\n\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n    <ion-button color=\"secondary\" shape=\"round\" (click)=\"addWallet()\">\n      <ion-icon slot=\"start\" name=\"add\"></ion-icon>\n      {{ 'tab-wallets.add-wallet_label' | translate }}\n    </ion-button>\n  </ion-fab>\n</ion-content>\n"],"sourceRoot":"webpack:///"}